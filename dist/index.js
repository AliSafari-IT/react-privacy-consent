'use strict';var react=require('react'),jsxRuntime=require('react/jsx-runtime');function B(t){let e=typeof Storage<"u",s=react.useCallback(n=>{if(e)try{let a=JSON.stringify(n);localStorage.setItem(t,a);}catch(a){console.warn("Failed to save consent to localStorage:",a);}},[t,e]),r=react.useCallback(()=>{if(!e)return null;try{let n=localStorage.getItem(t);if(!n)return null;let a=JSON.parse(n);return !a||!a.decisions||!a.version?null:{...a,lastUpdated:new Date(a.lastUpdated),decisions:a.decisions.map(u=>({...u,timestamp:new Date(u.timestamp)}))}}catch(n){return console.warn("Failed to load consent from localStorage:",n),null}},[t,e]),l=react.useCallback(()=>{if(e)try{localStorage.removeItem(t);}catch(n){console.warn("Failed to clear consent from localStorage:",n);}},[t,e]);return {saveConsent:s,loadConsent:r,clearConsent:l,isStorageAvailable:e}}function U(){return "session_"+Date.now()+"_"+Math.random().toString(36).substring(2,15)}function k(t,e,s,r){return {userId:r,sessionId:t,decisions:e,lastUpdated:new Date,version:s,userAgent:typeof navigator<"u"?navigator.userAgent:void 0}}function X(t,e){return !!(t&&t.version===e&&t.decisions&&Array.isArray(t.decisions)&&t.lastUpdated&&t.sessionId)}function Y(t,e){return t?t.decisions.find(r=>r.categoryId===e)?.status==="accepted":false}function Z(t,e){let s=[...t];return e.forEach(r=>{let l=s.findIndex(n=>n.categoryId===r.categoryId);l>=0?s[l]=r:s.push(r);}),s}function K(t,e){if(!t.lastUpdated)return  true;let s=new Date(t.lastUpdated);return s.setDate(s.getDate()+e),s<=new Date}function ee(t){return {userId:t.userId,sessionId:t.sessionId,decisions:t.decisions.map(e=>({categoryId:e.categoryId,status:e.status,timestamp:new Date(e.timestamp),version:e.version})),lastUpdated:new Date(t.lastUpdated),version:t.version,ipAddress:t.ipAddress,userAgent:t.userAgent}}function I(t){let e=document.documentElement;e.style.setProperty("--consent-primary-color",t.primaryColor),e.style.setProperty("--consent-secondary-color",t.secondaryColor),e.style.setProperty("--consent-background-color",t.backgroundColor),e.style.setProperty("--consent-text-color",t.textColor),e.style.setProperty("--consent-border-color",t.borderColor),e.style.setProperty("--consent-border-radius",t.borderRadius),e.style.setProperty("--consent-font-family",t.fontFamily),e.style.setProperty("--consent-font-size",t.fontSize),e.style.setProperty("--consent-button-style",t.buttonStyle),e.style.setProperty("--consent-shadow",t.shadow?"0 4px 6px rgba(0, 0, 0, 0.1)":"none");}function te(){let t=document.documentElement;["--consent-primary-color","--consent-secondary-color","--consent-background-color","--consent-text-color","--consent-border-color","--consent-border-radius","--consent-font-family","--consent-font-size","--consent-button-style","--consent-shadow"].forEach(s=>{t.style.removeProperty(s);});}function ne(){return {primaryColor:"#007bff",secondaryColor:"#6c757d",backgroundColor:"#ffffff",textColor:"#212529",borderColor:"#dee2e6",borderRadius:"0.375rem",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",buttonStyle:"solid",shadow:true}}function oe(){return {primaryColor:"#0d6efd",secondaryColor:"#adb5bd",backgroundColor:"#212529",textColor:"#ffffff",borderColor:"#495057",borderRadius:"0.375rem",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",buttonStyle:"solid",shadow:true}}var z=react.createContext(void 0);function ae({children:t,config:e}){let[s,r]=react.useState(false),[l,n]=react.useState(false),[a,u]=react.useState(null),[m]=react.useState(()=>U()),{saveConsent:f,loadConsent:o,clearConsent:x}=B(e.settings.storageKey);react.useEffect(()=>{let i=o();if(i&&i.version===e.settings.version){let b=new Date(i.lastUpdated);if(b.setDate(b.getDate()+e.settings.expirationDays),b>new Date){u(i);return}}let c=e.settings.autoShowDelay||0;setTimeout(()=>{(!i||i.version!==e.settings.version)&&(r(true),e.onBannerShow?.());},c);},[e,o]),react.useEffect(()=>{e.theme&&I(e.theme);},[e.theme]),react.useEffect(()=>{if(e.settings.respectDoNotTrack&&navigator.doNotTrack==="1"){let i=k(m,e.settings.categories.map(c=>({categoryId:c.id,status:c.required?"accepted":"rejected",timestamp:new Date,version:e.settings.version})),e.settings.version);u(i),f(i),r(false);}},[e.settings,m,f]);let v=react.useCallback(()=>{r(true),e.onBannerShow?.();},[e]),P=react.useCallback(()=>{r(false),e.onBannerHide?.();},[e]),_=react.useCallback(()=>{n(true);},[]),y=react.useCallback(()=>{n(false);},[]),g=react.useCallback(i=>{let c=k(m,i,e.settings.version);return u(c),f(c),e.onConsentChange?.(c),c},[m,e,f]),w=react.useCallback(()=>{let i=e.settings.categories.map(c=>({categoryId:c.id,status:"accepted",timestamp:new Date,version:e.settings.version}));g(i),r(false),n(false),e.onBannerHide?.();},[e,g]),F=react.useCallback(()=>{let i=e.settings.categories.map(c=>({categoryId:c.id,status:c.required?"accepted":"rejected",timestamp:new Date,version:e.settings.version}));g(i),r(false),n(false),e.onBannerHide?.();},[e,g]),L=react.useCallback((i,c)=>{if(!a)return;let b=a.decisions.filter(Q=>Q.categoryId!==i),G={categoryId:i,status:c?"accepted":"rejected",timestamp:new Date,version:e.settings.version};g([...b,G]);},[a,e.settings.version,g]),S=react.useCallback(i=>a&&a.decisions.find(b=>b.categoryId===i)?.status||"pending",[a]),$=react.useCallback(()=>a,[a]),J=react.useCallback(i=>S(i)==="accepted",[S]),O=react.useCallback(()=>{x(),u(null),r(true),n(false),e.onBannerShow?.();},[x,e]),W={isVisible:s,showBanner:v,hideBanner:P,showPreferences:_,hidePreferences:y,acceptAll:w,rejectAll:F,updateConsent:L,getConsent:S,getAllConsent:$,hasConsent:J,resetConsent:O,isPreferencesVisible:l,consentRecord:a,config:e};return jsxRuntime.jsx(z.Provider,{value:W,children:t})}function V(){let t=react.useContext(z);if(t===void 0)throw new Error("useConsentContext must be used within a ConsentProvider");return t}function T(){return V()}function ce({className:t="",style:e={},onAcceptAll:s,onRejectAll:r,onManagePreferences:l,children:n}){let{isVisible:a,acceptAll:u,rejectAll:m,showPreferences:f,config:o}=T();if(!a)return null;let x=()=>{u(),s?.();},v=()=>{m(),r?.();},P=()=>{f(),l?.();},_=["consent-banner",`consent-banner--${o.banner.position}`,`consent-banner--${o.banner.layout}`,o.banner.animation?"consent-banner--animated":"",t].filter(Boolean).join(" ");return jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[o.banner.backdrop&&jsxRuntime.jsx("div",{className:"consent-backdrop"}),jsxRuntime.jsx("div",{className:_,style:e,role:"dialog","aria-labelledby":"consent-title","aria-describedby":"consent-description",children:n||jsxRuntime.jsxs("div",{className:"consent-banner__content",children:[jsxRuntime.jsxs("div",{className:"consent-banner__text",children:[jsxRuntime.jsx("h3",{id:"consent-title",className:"consent-banner__title",children:o.texts.title}),jsxRuntime.jsx("p",{id:"consent-description",className:"consent-banner__description",children:o.texts.description}),(o.texts.learnMoreUrl||o.texts.privacyPolicyUrl)&&jsxRuntime.jsxs("div",{className:"consent-banner__links",children:[o.texts.learnMoreUrl&&jsxRuntime.jsx("a",{href:o.texts.learnMoreUrl,target:"_blank",rel:"noopener noreferrer",className:"consent-banner__link",children:o.texts.learnMoreText}),o.texts.privacyPolicyUrl&&jsxRuntime.jsx("a",{href:o.texts.privacyPolicyUrl,target:"_blank",rel:"noopener noreferrer",className:"consent-banner__link",children:"Privacy Policy"})]})]}),jsxRuntime.jsxs("div",{className:"consent-banner__actions",children:[o.settings.showAcceptAll&&jsxRuntime.jsx("button",{onClick:x,className:"consent-button consent-button--primary",type:"button",children:o.texts.acceptAllText}),o.settings.showDeclineAll&&jsxRuntime.jsx("button",{onClick:v,className:"consent-button consent-button--secondary",type:"button",children:o.texts.rejectAllText}),o.settings.showManagePreferences&&jsxRuntime.jsx("button",{onClick:P,className:"consent-button consent-button--ghost",type:"button",children:o.texts.managePreferencesText})]}),o.banner.showCloseButton&&jsxRuntime.jsx("button",{onClick:v,className:"consent-banner__close","aria-label":o.texts.closeText,type:"button",children:"\xD7"}),o.texts.poweredByText&&jsxRuntime.jsx("div",{className:"consent-banner__powered-by",children:o.texts.poweredByText})]})})]})}function E({checked:t,onChange:e,disabled:s=false,size:r="md",className:l="",label:n}){let a=["consent-toggle",`consent-toggle--${r}`,t?"consent-toggle--checked":"",s?"consent-toggle--disabled":"",l].filter(Boolean).join(" ");return jsxRuntime.jsxs("label",{className:a,children:[jsxRuntime.jsx("input",{type:"checkbox",checked:t,onChange:m=>{s||e(m.target.checked);},disabled:s,className:"consent-toggle__input","aria-label":n}),jsxRuntime.jsx("span",{className:"consent-toggle__slider"}),n&&jsxRuntime.jsx("span",{className:"consent-toggle__label",children:n})]})}function j({category:t,value:e,onChange:s,disabled:r=false,className:l=""}){let n=["consent-category",r?"consent-category--disabled":"",t.required?"consent-category--required":"",l].filter(Boolean).join(" ");return jsxRuntime.jsxs("div",{className:n,children:[jsxRuntime.jsxs("div",{className:"consent-category__header",children:[jsxRuntime.jsx("h4",{className:"consent-category__name",children:t.name}),jsxRuntime.jsx(E,{checked:e,onChange:s,disabled:r,size:"md"})]}),jsxRuntime.jsx("p",{className:"consent-category__description",children:t.description}),t.required&&jsxRuntime.jsx("span",{className:"consent-category__required-badge",children:"Required"})]})}function ue({isOpen:t,onClose:e,className:s="",style:r={},showBackdrop:l=true}){let{config:n,consentRecord:a,updateConsent:u,acceptAll:m,rejectAll:f,hidePreferences:o}=T();if(!t)return null;let x=()=>{o(),e();},v=()=>{m(),e();},P=()=>{f(),e();},_=["consent-modal",s].filter(Boolean).join(" ");return jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[l&&jsxRuntime.jsx("div",{className:"consent-modal__backdrop",onClick:e,role:"presentation"}),jsxRuntime.jsx("div",{className:_,style:r,role:"dialog","aria-labelledby":"consent-modal-title","aria-modal":"true",children:jsxRuntime.jsxs("div",{className:"consent-modal__content",children:[jsxRuntime.jsxs("div",{className:"consent-modal__header",children:[jsxRuntime.jsx("h2",{id:"consent-modal-title",className:"consent-modal__title",children:n.texts.managePreferencesText}),jsxRuntime.jsx("button",{onClick:e,className:"consent-modal__close","aria-label":n.texts.closeText,type:"button",children:"\xD7"})]}),jsxRuntime.jsxs("div",{className:"consent-modal__body",children:[jsxRuntime.jsx("p",{className:"consent-modal__description",children:n.texts.description}),jsxRuntime.jsx("div",{className:"consent-modal__categories",children:n.settings.categories.map(y=>{let g=a?.decisions.find(w=>w.categoryId===y.id)?.status==="accepted"||y.defaultValue;return jsxRuntime.jsx(j,{category:y,value:g,onChange:w=>u(y.id,w),disabled:y.required},y.id)})}),(n.texts.privacyPolicyUrl||n.texts.cookiePolicyUrl)&&jsxRuntime.jsxs("div",{className:"consent-modal__links",children:[n.texts.privacyPolicyUrl&&jsxRuntime.jsx("a",{href:n.texts.privacyPolicyUrl,target:"_blank",rel:"noopener noreferrer",className:"consent-modal__link",children:"Privacy Policy"}),n.texts.cookiePolicyUrl&&jsxRuntime.jsx("a",{href:n.texts.cookiePolicyUrl,target:"_blank",rel:"noopener noreferrer",className:"consent-modal__link",children:"Cookie Policy"})]})]}),jsxRuntime.jsx("div",{className:"consent-modal__footer",children:jsxRuntime.jsxs("div",{className:"consent-modal__actions",children:[jsxRuntime.jsx("button",{onClick:x,className:"consent-button consent-button--primary",type:"button",children:n.texts.savePreferencesText}),n.settings.showAcceptAll&&jsxRuntime.jsx("button",{onClick:v,className:"consent-button consent-button--secondary",type:"button",children:n.texts.acceptAllText}),n.settings.showDeclineAll&&jsxRuntime.jsx("button",{onClick:P,className:"consent-button consent-button--ghost",type:"button",children:n.texts.rejectAllText})]})})]})})]})}var Ce={categories:[{id:"necessary",name:"Necessary",description:"Essential cookies required for basic website functionality.",type:"necessary",required:true,defaultValue:true},{id:"analytics",name:"Analytics",description:"Cookies that help us understand how visitors interact with our website.",type:"analytics",required:false,defaultValue:false},{id:"marketing",name:"Marketing",description:"Cookies used to deliver personalized advertisements.",type:"marketing",required:false,defaultValue:false},{id:"preferences",name:"Preferences",description:"Cookies that remember your preferences and settings.",type:"preferences",required:false,defaultValue:false}],version:"1.0.0",expirationDays:365,storageKey:"asafarim-privacy-consent",showDeclineAll:true,showAcceptAll:true,showManagePreferences:true,autoShowDelay:1e3,respectDoNotTrack:true},me={position:"bottom",layout:"banner",showCloseButton:true,showCompanyLogo:false,blocking:false,animation:true,backdrop:false},fe={title:"We value your privacy",description:"We use cookies and similar technologies to provide the best experience on our website. Some are necessary for functionality, while others help us understand usage and improve our services.",acceptAllText:"Accept All",rejectAllText:"Reject All",managePreferencesText:"Manage Preferences",savePreferencesText:"Save Preferences",closeText:"Close",learnMoreText:"Learn More",poweredByText:"Powered by @asafarim/react-privacy-consent"},Fe={settings:Ce,banner:me,texts:fe};exports.ConsentBanner=ce;exports.ConsentCategory=j;exports.ConsentModal=ue;exports.ConsentProvider=ae;exports.ConsentToggle=E;exports.applyConsentTheme=I;exports.createConsentRecord=k;exports.defaultBannerConfig=me;exports.defaultConsentTexts=fe;exports.defaultPrivacyConsentConfig=Fe;exports.defaultPrivacySettings=Ce;exports.generateSessionId=U;exports.getConsentValue=Y;exports.getDarkTheme=oe;exports.getDefaultTheme=ne;exports.hasExpiredConsent=K;exports.isValidConsentRecord=X;exports.mergeConsentDecisions=Z;exports.removeConsentTheme=te;exports.sanitizeConsentRecord=ee;exports.useConsent=T;exports.useConsentContext=V;exports.useConsentStorage=B;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map